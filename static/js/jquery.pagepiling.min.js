/*
 * pagepiling.js 1.5.6
 *
 * https://github.com/alvarotrigo/pagePiling.js
 * @license MIT licensed
 *
 * Copyright (C) 2016 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(a,b,d,c){a.fn.pagepiling=function(an){function o(f){f.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function aG(f){var h=a(".pp-section.active").index(".pp-section"),g=f.index(".pp-section");return h>g?"up":"down"}function ac(g,j){var h={destination:g,animated:j,activeSection:a(".pp-section.active"),anchorLink:g.data("anchor"),sectionIndex:g.index(".pp-section"),toMove:g,yMovement:aG(g),leavingSection:a(".pp-section.active").index(".pp-section")+1};if(!h.activeSection.is(g)){"undefined"==typeof h.animated&&(h.animated=!0),"undefined"!=typeof h.anchorLink&&aL(h.anchorLink,h.sectionIndex),h.destination.addClass("active").siblings().removeClass("active"),h.sectionsToMove=aA(h),"down"===h.yMovement?(h.translate3d=aK(),h.scrolling="-100%",aU.css3||h.sectionsToMove.each(function(i){i!=h.activeSection.index(".pp-section")&&a(this).css(aJ(h.scrolling))}),h.animateSection=h.activeSection):(h.translate3d="translate3d(0px, 0px, 0px)",h.scrolling="0",h.animateSection=g),a.isFunction(aU.onLeave)&&aU.onLeave.call(this,h.leavingSection,h.sectionIndex+1,h.yMovement),aE(h),t(h.anchorLink),aT(h.anchorLink,h.sectionIndex),aO=h.anchorLink;var f=(new Date).getTime();aD=f}}function aE(f){aU.css3?(aN(f.animateSection,f.translate3d,f.animated),f.sectionsToMove.each(function(){aN(a(this),f.translate3d,f.animated)}),setTimeout(function(){au(f)},aU.scrollingSpeed)):(f.scrollOptions=aJ(f.scrolling),f.animated?f.animateSection.animate(f.scrollOptions,aU.scrollingSpeed,aU.easing,function(){ae(f),au(f)}):(f.animateSection.css(aJ(f.scrolling)),setTimeout(function(){ae(f),au(f)},400)))}function au(f){a.isFunction(aU.afterLoad)&&aU.afterLoad.call(this,f.anchorLink,f.sectionIndex+1)}function aA(f){var g;return g="down"===f.yMovement?a(".pp-section").map(function(h){if(h<f.destination.index(".pp-section")){return a(this)}}):a(".pp-section").map(function(h){if(h>f.destination.index(".pp-section")){return a(this)}})}function ae(f){"up"===f.yMovement&&f.sectionsToMove.each(function(g){a(this).css(aJ(f.scrolling))})}function aJ(f){return"vertical"===aU.direction?{top:f}:{left:f}}function aL(f,g){aU.anchors.length?(location.hash=f,ah(location.hash)):ah(String(g))}function ah(f){f=f.replace("#",""),a("body")[0].className=a("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),a("body").addClass("pp-viewing-"+f)}function al(){var h=d.location.hash.replace("#",""),g=h,f=a(b).find('.pp-section[data-anchor="'+g+'"]');f.length>0&&ac(f,aU.animateAnchor)}function aw(){var f=(new Date).getTime();return f-aD<aq+aU.scrollingSpeed}function aj(){var h=d.location.hash.replace("#","").split("/"),g=h[0];if(g.length&&g&&g!==aO){var f;f=isNaN(g)?a(b).find('[data-anchor="'+g+'"]'):a(".pp-section").eq(g-1),ac(f)}}function aH(f){return{"-webkit-transform":f,"-moz-transform":f,"-ms-transform":f,transform:f}}function aN(f,g,h){f.toggleClass("pp-easing",h),f.css(aH(g))}function aa(m){var q=(new Date).getTime();m=m||d.event;var j=m.wheelDelta||-m.deltaY||-m.detail,f=Math.max(-1,Math.min(1,j)),y="undefined"!=typeof m.wheelDeltaX||"undefined"!=typeof m.deltaX,g=Math.abs(m.wheelDeltaX)<Math.abs(m.wheelDelta)||Math.abs(m.deltaX)<Math.abs(m.deltaY)||!y;ak.length>149&&ak.shift(),ak.push(Math.abs(j));var x=q-n;if(n=q,x>200&&(ak=[]),!aw()){var k=a(".pp-section.active"),w=aI(k),h=aR(ak,10),z=aR(ak,70),A=h>=z;return A&&g&&(f<0?aP("down",w):f>0&&aP("up",w)),!1}}function aR(f,h){for(var k=0,j=f.slice(Math.max(f.length-h,1)),g=0;g<j.length;g++){k+=j[g]}return Math.ceil(k/h)}function aP(f,g){var i,h;if("down"==f?(i="bottom",h=ab.moveSectionDown):(i="top",h=ab.moveSectionUp),g.length>0){if(!ax(i,g)){return !0}h()}else{h()}}function ax(f,g){return"top"===f?!g.scrollTop():"bottom"===f?g.scrollTop()+1+g.innerHeight()>=g[0].scrollHeight:void 0}function aI(f){return f.filter(".pp-scrollable")}function ad(){ai.get(0).addEventListener?(ai.get(0).removeEventListener("mousewheel",aa,!1),ai.get(0).removeEventListener("wheel",aa,!1)):ai.get(0).detachEvent("onmousewheel",aa)}function ar(){ai.get(0).addEventListener?(ai.get(0).addEventListener("mousewheel",aa,!1),ai.get(0).addEventListener("wheel",aa,!1)):ai.get(0).attachEvent("onmousewheel",aa)}function ag(){if(aF){var f=af();ai.off("touchstart "+f.down).on("touchstart "+f.down,aB),ai.off("touchmove "+f.move).on("touchmove "+f.move,aS)}}function av(){if(aF){var f=af();ai.off("touchstart "+f.down),ai.off("touchmove "+f.move)}}function af(){var f;return f=d.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function ao(f){var g=new Array;return g.y="undefined"!=typeof f.pageY&&(f.pageY||f.pageX)?f.pageY:f.touches[0].pageY,g.x="undefined"!=typeof f.pageX&&(f.pageY||f.pageX)?f.pageX:f.touches[0].pageX,g}function aQ(f){return"undefined"==typeof f.pointerType||"mouse"!=f.pointerType}function aB(f){var g=f.originalEvent;if(aQ(g)){var h=ao(g);ap=h.y,am=h.x}}function aS(h){var k=h.originalEvent;if(!ay(h.target)&&aQ(k)){var j=a(".pp-section.active"),g=aI(j);if(g.length||h.preventDefault(),!aw()){var f=ao(k);at=f.y,aM=f.x,"horizontal"===aU.direction&&Math.abs(am-aM)>Math.abs(ap-at)?Math.abs(am-aM)>ai.width()/100*aU.touchSensitivity&&(am>aM?aP("down",g):aM>am&&aP("up",g)):Math.abs(ap-at)>ai.height()/100*aU.touchSensitivity&&(ap>at?aP("down",g):at>ap&&aP("up",g))}}}function ay(f,h){h=h||0;var g=a(f).parent();return !!(h<aU.normalScrollElementTouchThreshold&&g.is(aU.normalScrollElements))||h!=aU.normalScrollElementTouchThreshold&&ay(g,++h)}function aC(){a("body").append('<div id="pp-nav"><ul></ul></div>');var g=a("#pp-nav");g.css("color",aU.navigation.textColor),g.addClass(aU.navigation.position);for(var j=0;j<a(".pp-section").length;j++){var h="";if(aU.anchors.length&&(h=aU.anchors[j]),"undefined"!==aU.navigation.tooltips){var f=aU.navigation.tooltips[j];"undefined"==typeof f&&(f="")}g.find("ul").append('<li data-tooltip="'+f+'"><a href="#'+h+'"><span></span></a></li>')}g.find("span").css("border-color",aU.navigation.bulletsColor)}function aT(f,g){aU.navigation&&(a("#pp-nav").find(".active").removeClass("active"),f?a("#pp-nav").find('a[href="#'+f+'"]').addClass("active"):a("#pp-nav").find("li").eq(g).find("a").addClass("active"))}function t(f){aU.menu&&(a(aU.menu).find(".active").removeClass("active"),a(aU.menu).find('[data-menuanchor="'+f+'"]').addClass("active"))}function az(){var g,h=b.createElement("p"),f={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};b.body.insertBefore(h,null);for(var j in f){h.style[j]!==c&&(h.style[j]="translate3d(1px,1px,1px)",g=d.getComputedStyle(h).getPropertyValue(f[j]))}return b.body.removeChild(h),g!==c&&g.length>0&&"none"!==g}function aK(){return"vertical"!==aU.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}var aO,ab=a.fn.pagepiling,ai=a(this),aD=0,aF="ontouchstart" in d||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,ap=0,am=0,at=0,aM=0,ak=[],aq=600,aU=a.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null},an);a.extend(a.easing,{easeInQuart:function(f,h,k,j,g){return j*(h/=g)*h*h*h+k}}),ab.setScrollingSpeed=function(f){aU.scrollingSpeed=f},ab.setMouseWheelScrolling=function(f){f?ar():ad()},ab.setAllowScrolling=function(f){f?(ab.setMouseWheelScrolling(!0),ag()):(ab.setMouseWheelScrolling(!1),av())},ab.setKeyboardScrolling=function(f){aU.keyboardScrolling=f},ab.moveSectionUp=function(){var f=a(".pp-section.active").prev(".pp-section");!f.length&&aU.loopTop&&(f=a(".pp-section").last()),f.length&&ac(f)},ab.moveSectionDown=function(){var f=a(".pp-section.active").next(".pp-section");!f.length&&aU.loopBottom&&(f=a(".pp-section").first()),f.length&&ac(f)},ab.moveTo=function(g){var f="";f=isNaN(g)?a(b).find('[data-anchor="'+g+'"]'):a(".pp-section").eq(g-1),f.length>0&&ac(f)},a(aU.sectionSelector).each(function(){a(this).addClass("pp-section")}),aU.css3&&(aU.css3=az()),a(ai).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),ab.setAllowScrolling(!0),a.isEmptyObject(aU.navigation)||aC();var e=a(".pp-section").length;a(".pp-section").each(function(f){a(this).data("data-index",f),a(this).css("z-index",e),f||0!==a(".pp-section.active").length||a(this).addClass("active"),"undefined"!=typeof aU.anchors[f]&&a(this).attr("data-anchor",aU.anchors[f]),"undefined"!=typeof aU.sectionsColor[f]&&a(this).css("background-color",aU.sectionsColor[f]),aU.verticalCentered&&!a(this).hasClass("pp-scrollable")&&o(a(this)),e-=1}).promise().done(function(){aU.navigation&&(a("#pp-nav").css("margin-top","-"+a("#pp-nav").height()/2+"px"),a("#pp-nav").find("li").eq(a(".pp-section.active").index(".pp-section")).find("a").addClass("active")),a(d).on("load",function(){al()}),a.isFunction(aU.afterRender)&&aU.afterRender.call(this)}),a(d).on("hashchange",aj),a(b).keydown(function(f){if(aU.keyboardScrolling&&!aw()){switch(f.which){case 38:case 33:ab.moveSectionUp();break;case 40:case 34:ab.moveSectionDown();break;case 36:ab.moveTo(1);break;case 35:ab.moveTo(a(".pp-section").length);break;case 37:ab.moveSectionUp();break;case 39:ab.moveSectionDown();break;default:return}}}),aU.normalScrollElements&&(a(b).on("mouseenter",aU.normalScrollElements,function(){ab.setMouseWheelScrolling(!1)}),a(b).on("mouseleave",aU.normalScrollElements,function(){ab.setMouseWheelScrolling(!0)}));var n=(new Date).getTime();a(b).on("click touchstart","#pp-nav a",function(f){f.preventDefault();var g=a(this).parent().index();ac(a(".pp-section").eq(g))}),a(b).on({mouseenter:function(){var f=a(this).data("tooltip");a('<div class="pp-tooltip '+aU.navigation.position+'">'+f+"</div>").hide().appendTo(a(this)).fadeIn(200)},mouseleave:function(){a(this).find(".pp-tooltip").fadeOut(200,function(){a(this).remove()})}},"#pp-nav li")}}(jQuery,document,window);